<div id="<%= dom_id @item %>">
  <p>
    <strong>Name:</strong>
    <%= link_to @item.name, @item.source_url %>
  </p>

  <p>
    <strong>Location: </strong>
    <%= link_to @item.location.name, @item.location %>
  </p>

  <p>
    <strong>Tags:</strong>
    <%= @item.tag_list %>
  </p>


  <p>
    <strong>Parent:</strong>
    <% if @item.parent %>
      <%= link_to @item.parent.name, @item.parent %>
    <% else %>
      None - Root item
    <% end %>
  </p>

  <p>
    <strong>Children:</strong>
    <% if @item.children.present? %>
      <% @item.children.each do |child| %>
        <%= link_to child.name, child %>
      <% end %>
    <% else %>
      None
    <% end %>
  </p>

  <hr>
  <%= govspeak_to_html @item.description %>

</div>

<div>
  <%= link_to "Edit this item", edit_location_item_path(@location, @item) %>

  <%= button_to "Destroy this item", [@location, @item], method: :delete %>
</div>

<div>
  <div>
    <p>Comments</p>
    <%= form_with(model: [@location, @item, @item.comments.build]) do |f| %>
      <div class="govuk-form-group">
        <%= f.label :body, 'New comment' %>
        <%= f.text_area :body %>
      </div>
      <%= f.submit 'Submit' %>
    <% end %>
  </div>
</div>

<%= render @item.comments %>
